<?xml version="1.0" encoding="utf-8" ?>
<openerp>
    <data>
        <record id="reports_filter" model="ir.ui.view">
            <field name="name">reports.filter</field>
            <field name="model">report.reports</field>
            <field name="arch" type="xml">
                <search string="search reports">
                    <field name="partner_id"/>
                    <field name="project_id"/>
                    <field name="project_activity_id"/>
                    <field name="users_ids"/>
                    <field name="partecipants_customer_description"/>
                    <field name="start_journey_date"/>
                    <field name="end_journey_date"/>
                    <field name="start_activity_date"/>
                    <field name="end_activity_date"/>
                    <field name="activity_description"/>
                    <field name="customer_note"/>
                    <filter string="Prepaid" domain="[('order_type','=', 'prepaid')]"/>
                    <filter string="Comsumptive" domain="[('order_type','=', 'consumptive')]"/>
                    <filter string="Debit" domain="[('debit','=', True)]"/>
                    <filter string="Not debit" domain="[('debit','!=', False)]"/>
                    <group expand="0" string="Group By">
                        <filter name="partner_id" string="Partner" context="{'group_by':'partner_id'}"/>
                        <filter name="project_id" string="Project" context="{'group_by':'project_id'}"/>
                        <filter name="project_activity_id" string="Activity" context="{'group_by':'project_activity_id'}"/>
                    </group>
                </search>
            </field>
        </record>

        <record id="view_reports_tree" model="ir.ui.view">
            <field name="name">view_reports_tree.tree</field>
            <field name="model">report.reports</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree>
                    <field name="partner_id"/>
                    <field name="project_id"/>
                    <field name="project_activity_id"/>
                    <field name="start_journey_date"/>
                    <field name="end_journey_date"/>
                    <field name="start_activity_date"/>
                    <field name="end_activity_date"/>
                    <field name="order_type"/>
                    <field name="debit"/>
                </tree>
            </field>
        </record>

        <record id="view_reports_form" model="ir.ui.view">
            <field name="name">view_reports_form.form</field>
            <field name="model">report.reports</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form>
                    <group>
                        <group>
                           <field name="partner_id"/>
                           <field name="project_activity_id"/>
                        </group>
                        <group>
                           <field name="project_id" domain="[('partner_id', '=', partner_id)]"/>
                           <field name="order_type"/>
                        </group>
                    </group>
                    <group>
                        <field name="users_ids"/>
                    </group>
                    <group>
                        <group>
                            <field name="start_journey_date"/>
                            <field name="end_journey_date"/>
                        </group>
                        <group>
                            <field name="start_activity_date"/>
                            <field name="end_activity_date"/>
                        </group>
                    </group>
                    <group>
                        <group>
                            <field name="activity_description"/>
                            <field name="customer_note"/>
                        </group>
                        <group>
                            <field name="partecipants_customer_description"/>
                            <field name="debit"/>
                        </group>
                    </group>
                    <group>
                        <field name="notes_ids"/>
                    </group>
                    <group>
                        <field name="digital_sign" widget="signature"/>
                    </group>
                </form>
            </field>
        </record>

        <record id="action_reports" model="ir.actions.act_window">
            <field name="name">Reports</field>
            <field name="res_model">report.reports</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
        </record>

        <menuitem id="action_menu_reports" parent="project.menu_project_management" name="Technical reports"  action="action_reports"/>
    </data>
</openerp>